{% extends "base_generic.html" %}

{% block title %}Login{% endblock %}

{% block breadcrumb %}
<li class="nav-item active" aria-current="page">
  <span class="nav-link">Login</span>
</li>
{% endblock %}

{% block content %}

<div class="row">
  <div class="col-lg-8">
    <h1>Login</h1>

    {% if request.user.is_authenticated %}

    <p class="lead">
      You're already logged in.
    </p>
    <p>
      Your username is
      <tt>{{ request.user.username }}</tt>,
      and your identity provided by the authentication server is
      <tt>{{ request.META.REMOTE_USER }}</tt>.
    </p>

    <p>
      <a href="{% url 'registration:index' %}">
        Continue to the home page
      </a>
    </p>

    {% else %}

    <p class="lead">
      You aren't logged in.
    </p>

    <p>
      This system only recognizes <tt>andrew.cmu.edu</tt> identities.
      {% if request.META.REMOTE_USER %}
      However, your current identity provided by the authentication server
      is <tt>{{ request.META.REMOTE_USER }}</tt>.
      {% else %}
      However, your session is not associated with an identity.
      {% endif %}
    </p>

    <p>
      To continue, please try logging in again with your
      <tt>andrew.cmu.edu</tt> identity. If you continue to have
      problems logging in, please contact the website
      administrator or your course instructor.
    </p>

    {% endif %}

  </div>
</div>

{% endblock %}
